<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.12"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>QTrk: Queued Tracker software</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">QTrk
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.12 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Queued Tracker software </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="intro_sec"></a>
Introduction</h1>
<p><a class="el" href="class_queued_tracker.html" title="Abstract tracker interface, implemented by QueuedCUDATracker and QueuedCPUTracker. ">QueuedTracker</a>, or QTrk in short, is an API that facilitates the 3 dimensional subpixel tracking of a magnetic bead in a Magnetic Tweezers (MT) setup. The code found here generates a general purpose library in the form of a DLL that can be used from either .NET applications or LabVIEW. The <a href="https://github.com/NynkeDekkerLab/BeadTracker/tree/master">LabVIEW GUI and hardware control</a>, which is not included in this documentation, has been created very specifically for the setups as designed and used in the <a href="http://nynkedekkerlab.tudelft.nl/">Nynke Dekker lab</a>.</p>
<h1><a class="anchor" id="hist_sec"></a>
History</h1>
<p>The MT setups are homebuilt devices for biological single molecule measurements. They have evolved over the years and so has the need for the related software. Considering the framerate and number of pixels of state of the art cameras involved in the setups, the requirements with regards to data handling are now very steep. A measurement running for a few hours generates hundreds of gigabytes worth of image data. As such, the need arose to do the image analysis fast, in real-time. This software was created to do precisely that. To ensure high speed data analysis, multiple algorithms have been implemented in multithreaded CPU and GPU (through CUDA) implementations, with a scheduling shell (<a class="el" href="class_queued_c_p_u_tracker.html" title="CPU implementation of the QueuedTracker interface. ">QueuedCPUTracker</a> and <a class="el" href="class_queued_c_u_d_a_tracker.html" title="CUDA implementation of the QueuedTracker interface. ">QueuedCUDATracker</a>) and separate data gathering and saving thread (<a class="el" href="class_result_manager.html" title="Class that handles data gathering and saving from QueuedTracker instances. ">ResultManager</a>).</p>
<h1><a class="anchor" id="algo_sec"></a>
Algorithms</h1>
<p>The goal is to find a 3 dimensional position of a bead from a microscopic image. A typical image of a single bead is displayed below: </p><div class="image">
<img src="00008153-s.jpg" alt="00008153-s.jpg"/>
</div>
<p> To perform the tracking, specific algorithms exist and have been implemented. Currently the available options are: </p><table class="doxtable">
<tr>
<th>Algorithm </th><th>Dimensions </th><th>CPU </th><th>CUDA </th><th>Reference </th><th>Notes </th></tr>
<tr>
<td>Starting point </td><td></td><td><a class="el" href="class_queued_c_p_u_tracker.html#a3c827ffb590b8e80b7e5a585f432ace9" title="Process a job. ">QueuedCPUTracker::ProcessJob</a> </td><td><a class="el" href="class_queued_c_u_d_a_tracker.html#a66c822d85cceb3b20793a9f5be76aae0" title="Execute the queued batch on a stream. ">QueuedCUDATracker::ExecuteBatch</a> </td><td></td><td>Functions from which the algorithms are called dependent on settings. </td></tr>
<tr>
<td></td></tr>
<tr>
<td>Center of Mass (COM) </td><td>x,y </td><td><a class="el" href="class_c_p_u_tracker.html#a18c3c6ec23abbbfb018d30b166ed140e">CPUTracker::ComputeMeanAndCOM</a> </td><td><a class="el" href="group__kernels.html#gaadfa5148ca9461daab04dbf9e0394791">BgCorrectedCOM</a> </td><td><a href="https://en.wikipedia.org/wiki/Image_moment">https://en.wikipedia.org/wiki/Image_moment</a></td><td>Always executed for first guess. </td></tr>
<tr>
<td>1D Cross Correlation (XCor1D) </td><td>x,y </td><td><a class="el" href="class_c_p_u_tracker.html#aeb547c7da30e1621b2869634182c0900" title="Compute the cross correlation offsets and resulting position. ">CPUTracker::ComputeXCorInterpolated</a> </td><td>Not implemented </td><td><a href="https://en.wikipedia.org/wiki/Cross-correlation">https://en.wikipedia.org/wiki/Cross-correlation</a></td><td></td></tr>
<tr>
<td>Quadrant Interpolation (QI) </td><td>x,y </td><td><a class="el" href="class_c_p_u_tracker.html#ab856aa12313a07c083f2e193180fd5b6" title="Execute the quadrant interpolation algorithm. ">CPUTracker::ComputeQI</a> </td><td><a class="el" href="class_q_i.html" title="Class to specifically perform quadrant interpolation calculations on the GPU. ">QI</a>, <a class="el" href="class_q_i.html#a084274d952e1430627110818f398a3d4" title="Execute a batch of QI calculations. Runs Iterate the correct number of times and recalculates the num...">QI::Execute</a> </td><td><a class="el" href="citelist.html#CITEREF_loen:QI">[3]</a> </td><td>Recommended algorithm. Optimized for speed and accuracy. </td></tr>
<tr>
<td>2D Gaussian fit </td><td>x,y </td><td><a class="el" href="class_c_p_u_tracker.html#a99567e8137e89ff9ee084558e9f26344" title="Calculate a 2D Gaussian fit on the image. ">CPUTracker::Compute2DGaussianMLE</a> </td><td><a class="el" href="group__kernels.html#gaf3546eed501c5227c765beb290ed2549">G2MLE_Compute</a> </td><td><a href="https://en.wikipedia.org/wiki/Gaussian_function#Two-dimensional_Gaussian_function">https://en.wikipedia.org/wiki/Gaussian_function#Two-dimensional_Gaussian_function</a></td><td></td></tr>
<tr>
<td>Lookup table (LUT) </td><td>z </td><td><a class="el" href="class_c_p_u_tracker.html#a425db1a2a66d9635d2b4b565ecfdc3b0">CPUTracker::ComputeRadialProfile</a> <br />
<a class="el" href="class_c_p_u_tracker.html#a605758e0bf1f897f86f38b65e99e320b">CPUTracker::LUTProfileCompare</a> </td><td><a class="el" href="group__kernels.html#gadf9148f47982d2685fa156a957fc21c2">ZLUT_RadialProfileKernel</a> <br />
<a class="el" href="group__kernels.html#gad0ba2ca03fcfe17bda05c872842afaae">ZLUT_ComputeZ</a> </td><td><a class="el" href="citelist.html#CITEREF_loen:QI">[3]</a> </td><td>Only available method for z localization. </td></tr>
</table>
<p>Internally, QI has grown to be the most used and verified algorithm. Usage of it is recommended for data equality.</p>
<h1><a class="anchor" id="soft_sec"></a>
Required software</h1>
<p>To be able to compile the DLLs, you need:</p><ul>
<li>Visual Studio (2010)</li>
<li>CUDA (6.5)</li>
</ul>
<p>To be able to use the CUDA DLLs, the cudart32_65.dll and cufft32_65.dll (or 64 bit versions if compiled with that) need to be known and accessible by the system, i.e. they need to be in the same folder. We are currently limited to using CUDA 6.5 instead of newer versions due to the fact that we have a 32 bit LabVIEW version on setups and 32 bit cuFFT has been deprecated in newer CUDA versions.</p>
<h1><a class="anchor" id="disclaimer"></a>
Disclaimer</h1>
<p>Code is provided as-is. Bugs may be encountered. Maintenance and support at the discretion of lab members.</p>
<p>This code and documentation is intended for internal use and provided publicly in the interest of transparency.</p>
<h1><a class="anchor" id="cred_sec"></a>
Credits</h1>
<p>Original work by Jelmer Cnossen <a class="el" href="citelist.html#CITEREF_rsi:cnos">[1]</a>. Maintenance, testing, documentation and improvements by Jordi Wassenburg. </p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.12
</small></address>
</body>
</html>
