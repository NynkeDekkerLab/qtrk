\hypertarget{_queued_c_u_d_a_tracker_8cu}{}\section{cudatrack/\+Queued\+C\+U\+D\+A\+Tracker.cu File Reference}
\label{_queued_c_u_d_a_tracker_8cu}\index{cudatrack/\+Queued\+C\+U\+D\+A\+Tracker.\+cu@{cudatrack/\+Queued\+C\+U\+D\+A\+Tracker.\+cu}}
{\ttfamily \#include \char`\"{}std\+\_\+incl.\+h\char`\"{}}\\*
{\ttfamily \#include $<$algorithm$>$}\\*
{\ttfamily \#include \char`\"{}cuda\+\_\+runtime.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}device\+\_\+launch\+\_\+parameters.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}vector\+\_\+types.\+h\char`\"{}}\\*
{\ttfamily \#include $<$cstdint$>$}\\*
{\ttfamily \#include \char`\"{}utils.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}cpu\+\_\+tracker.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}Queued\+C\+U\+D\+A\+Tracker.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}gpu\+\_\+utils.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}Image\+Sampler.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}Kernels.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}Debug\+Result\+Compare.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}Q\+I\+\_\+impl.\+h\char`\"{}}\\*
\subsection*{Classes}
\begin{DoxyCompactItemize}
\item 
class \hyperlink{class_scoped_c_p_u_profiler}{Scoped\+C\+P\+U\+Profiler}
\end{DoxyCompactItemize}
\subsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\#define \hyperlink{_queued_c_u_d_a_tracker_8cu_af56066d48cd335420540dfaad1b7bbc9}{T\+R\+K\+\_\+\+P\+R\+O\+F\+I\+LE}
\end{DoxyCompactItemize}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
void \hyperlink{_queued_c_u_d_a_tracker_8cu_abda9d81bb47d6fd2b504bd3df9b2edae}{Set\+C\+U\+D\+A\+Devices} (int $\ast$dev, int numdev)
\item 
\hyperlink{class_queued_tracker}{Queued\+Tracker} $\ast$ \hyperlink{_queued_c_u_d_a_tracker_8cu_a04e7674e3705eefff30b5d6f5d3ab925}{Create\+Queued\+Tracker} (const \hyperlink{struct_q_trk_computed_config}{Q\+Trk\+Computed\+Config} \&cc)
\item 
static int \hyperlink{_queued_c_u_d_a_tracker_8cu_a19fc494f75b9dffe835d70fa70daae57}{Get\+Best\+C\+U\+D\+A\+Device} ()
\item 
\+\_\+\+\_\+global\+\_\+\+\_\+ void \hyperlink{_queued_c_u_d_a_tracker_8cu_aec3fff30d0a584140aaa1d322cc4a047}{Add\+Profiles\+To\+Z\+L\+UT} (float $\ast$d\+\_\+src, int nbeads, int radialsteps, int plane, \hyperlink{_queued_c_u_d_a_tracker_8h_a84de79f5d4b6e4c8d5622fe712c1bd69}{cuda\+Image\+Listf} zlut)
\item 
{\footnotesize template$<$typename T $>$ }\\void \hyperlink{_queued_c_u_d_a_tracker_8cu_a92f77d4c98e5e45869270339e47aa069}{checksum} (T $\ast$data, int elemsize, int numelem, const char $\ast$name)
\end{DoxyCompactItemize}
\subsection*{Variables}
\begin{DoxyCompactItemize}
\item 
static std\+::vector$<$ int $>$ \hyperlink{_queued_c_u_d_a_tracker_8cu_ab36f2f7f7b4b97a02a4597f7baef4f7a}{cuda\+Device\+List}
\end{DoxyCompactItemize}


\subsection{Macro Definition Documentation}
\index{Queued\+C\+U\+D\+A\+Tracker.\+cu@{Queued\+C\+U\+D\+A\+Tracker.\+cu}!T\+R\+K\+\_\+\+P\+R\+O\+F\+I\+LE@{T\+R\+K\+\_\+\+P\+R\+O\+F\+I\+LE}}
\index{T\+R\+K\+\_\+\+P\+R\+O\+F\+I\+LE@{T\+R\+K\+\_\+\+P\+R\+O\+F\+I\+LE}!Queued\+C\+U\+D\+A\+Tracker.\+cu@{Queued\+C\+U\+D\+A\+Tracker.\+cu}}
\subsubsection[{\texorpdfstring{T\+R\+K\+\_\+\+P\+R\+O\+F\+I\+LE}{TRK_PROFILE}}]{\setlength{\rightskip}{0pt plus 5cm}\#define T\+R\+K\+\_\+\+P\+R\+O\+F\+I\+LE}\hypertarget{_queued_c_u_d_a_tracker_8cu_af56066d48cd335420540dfaad1b7bbc9}{}\label{_queued_c_u_d_a_tracker_8cu_af56066d48cd335420540dfaad1b7bbc9}


\subsection{Function Documentation}
\index{Queued\+C\+U\+D\+A\+Tracker.\+cu@{Queued\+C\+U\+D\+A\+Tracker.\+cu}!Add\+Profiles\+To\+Z\+L\+UT@{Add\+Profiles\+To\+Z\+L\+UT}}
\index{Add\+Profiles\+To\+Z\+L\+UT@{Add\+Profiles\+To\+Z\+L\+UT}!Queued\+C\+U\+D\+A\+Tracker.\+cu@{Queued\+C\+U\+D\+A\+Tracker.\+cu}}
\subsubsection[{\texorpdfstring{Add\+Profiles\+To\+Z\+L\+U\+T(float $\ast$d\+\_\+src, int nbeads, int radialsteps, int plane, cuda\+Image\+Listf zlut)}{AddProfilesToZLUT(float *d_src, int nbeads, int radialsteps, int plane, cudaImageListf zlut)}}]{\setlength{\rightskip}{0pt plus 5cm}\+\_\+\+\_\+global\+\_\+\+\_\+ void Add\+Profiles\+To\+Z\+L\+UT (
\begin{DoxyParamCaption}
\item[{float $\ast$}]{d\+\_\+src, }
\item[{int}]{nbeads, }
\item[{int}]{radialsteps, }
\item[{int}]{plane, }
\item[{{\bf cuda\+Image\+Listf}}]{zlut}
\end{DoxyParamCaption}
)}\hypertarget{_queued_c_u_d_a_tracker_8cu_aec3fff30d0a584140aaa1d322cc4a047}{}\label{_queued_c_u_d_a_tracker_8cu_aec3fff30d0a584140aaa1d322cc4a047}

\begin{DoxyCode}
459 \{
460     \textcolor{keywordtype}{int} b = threadIdx.x + blockIdx.x * blockDim.x;
461     \textcolor{keywordtype}{int} r = threadIdx.y + blockIdx.y * blockDim.y;
462 
463     \textcolor{keywordflow}{if} (b < nbeads && r < radialsteps) \{
464         zlut.\hyperlink{structcuda_image_list_a3688416d9034449c1493e593c8456eb2}{pixel}(r, plane, b) += d\_src[ b * radialsteps + r ];
465     \}
466 \}
\end{DoxyCode}
\index{Queued\+C\+U\+D\+A\+Tracker.\+cu@{Queued\+C\+U\+D\+A\+Tracker.\+cu}!checksum@{checksum}}
\index{checksum@{checksum}!Queued\+C\+U\+D\+A\+Tracker.\+cu@{Queued\+C\+U\+D\+A\+Tracker.\+cu}}
\subsubsection[{\texorpdfstring{checksum(\+T $\ast$data, int elemsize, int numelem, const char $\ast$name)}{checksum(T *data, int elemsize, int numelem, const char *name)}}]{\setlength{\rightskip}{0pt plus 5cm}template$<$typename T $>$ void checksum (
\begin{DoxyParamCaption}
\item[{T $\ast$}]{data, }
\item[{int}]{elemsize, }
\item[{int}]{numelem, }
\item[{const char $\ast$}]{name}
\end{DoxyParamCaption}
)}\hypertarget{_queued_c_u_d_a_tracker_8cu_a92f77d4c98e5e45869270339e47aa069}{}\label{_queued_c_u_d_a_tracker_8cu_a92f77d4c98e5e45869270339e47aa069}

\begin{DoxyCode}
571 \{
572 \textcolor{preprocessor}{#ifdef QI\_DBG\_EXPORT}
573     \hyperlink{std__incl_8h_a65f85814a8290f9797005d3b28e7e5fc}{uchar}* cp = (\hyperlink{std__incl_8h_a65f85814a8290f9797005d3b28e7e5fc}{uchar}*)\hyperlink{std__incl_8h_a72fc0ed307a114ba9a46ebd095267d2f}{ALLOCA}(elemsize*numelem*\textcolor{keyword}{sizeof}(T));
574     cudaDeviceSynchronize();
575     cudaMemcpy(cp, data, \textcolor{keyword}{sizeof}(T)*elemsize*numelem, cudaMemcpyDeviceToHost);
576 
577     \hyperlink{utils_8cpp_a4a7132c90e490d24edecb391a754a9c0}{dbgprintf}(\textcolor{stringliteral}{"%s:\(\backslash\)n"}, name);
578     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i=0;i<numelem;i++) \{
579         \hyperlink{std__incl_8h_a65f85814a8290f9797005d3b28e7e5fc}{uchar} *elem = cp+elemsize*\textcolor{keyword}{sizeof}(T)*i;
580         \hyperlink{utils_8cpp_a4a7132c90e490d24edecb391a754a9c0}{dbgprintf}(\textcolor{stringliteral}{"[%d]: %d\(\backslash\)n"}, i, hash(elem, elemsize));
581     \}
582 \textcolor{preprocessor}{#endif}
583 \}
\end{DoxyCode}
\index{Queued\+C\+U\+D\+A\+Tracker.\+cu@{Queued\+C\+U\+D\+A\+Tracker.\+cu}!Create\+Queued\+Tracker@{Create\+Queued\+Tracker}}
\index{Create\+Queued\+Tracker@{Create\+Queued\+Tracker}!Queued\+C\+U\+D\+A\+Tracker.\+cu@{Queued\+C\+U\+D\+A\+Tracker.\+cu}}
\subsubsection[{\texorpdfstring{Create\+Queued\+Tracker(const Q\+Trk\+Computed\+Config \&cc)}{CreateQueuedTracker(const QTrkComputedConfig &cc)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Queued\+Tracker}$\ast$ Create\+Queued\+Tracker (
\begin{DoxyParamCaption}
\item[{const {\bf Q\+Trk\+Computed\+Config} \&}]{cc}
\end{DoxyParamCaption}
)}\hypertarget{_queued_c_u_d_a_tracker_8cu_a04e7674e3705eefff30b5d6f5d3ab925}{}\label{_queued_c_u_d_a_tracker_8cu_a04e7674e3705eefff30b5d6f5d3ab925}

\begin{DoxyCode}
89 \{
90     \textcolor{keywordflow}{return} \textcolor{keyword}{new} \hyperlink{class_queued_c_u_d_a_tracker}{QueuedCUDATracker}(cc);
91 \}
\end{DoxyCode}
\index{Queued\+C\+U\+D\+A\+Tracker.\+cu@{Queued\+C\+U\+D\+A\+Tracker.\+cu}!Get\+Best\+C\+U\+D\+A\+Device@{Get\+Best\+C\+U\+D\+A\+Device}}
\index{Get\+Best\+C\+U\+D\+A\+Device@{Get\+Best\+C\+U\+D\+A\+Device}!Queued\+C\+U\+D\+A\+Tracker.\+cu@{Queued\+C\+U\+D\+A\+Tracker.\+cu}}
\subsubsection[{\texorpdfstring{Get\+Best\+C\+U\+D\+A\+Device()}{GetBestCUDADevice()}}]{\setlength{\rightskip}{0pt plus 5cm}static int Get\+Best\+C\+U\+D\+A\+Device (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}\hypertarget{_queued_c_u_d_a_tracker_8cu_a19fc494f75b9dffe835d70fa70daae57}{}\label{_queued_c_u_d_a_tracker_8cu_a19fc494f75b9dffe835d70fa70daae57}

\begin{DoxyCode}
94 \{
95     \textcolor{keywordtype}{int} bestScore;
96     \textcolor{keywordtype}{int} bestDev;
97     \textcolor{keywordtype}{int} numDev;
98     cudaGetDeviceCount(&numDev);
99     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} a=0;a<numDev;a++) \{
100         \textcolor{keywordtype}{int} score;
101         cudaDeviceProp prop;
102         cudaGetDeviceProperties(&prop, a);
103         score = prop.multiProcessorCount * prop.clockRate;
104         \textcolor{keywordflow}{if} (a==0 || bestScore < score) \{
105             bestScore = score;
106             bestDev = a;
107         \}
108     \}
109     \textcolor{keywordflow}{return} bestDev;
110 \}
\end{DoxyCode}
\index{Queued\+C\+U\+D\+A\+Tracker.\+cu@{Queued\+C\+U\+D\+A\+Tracker.\+cu}!Set\+C\+U\+D\+A\+Devices@{Set\+C\+U\+D\+A\+Devices}}
\index{Set\+C\+U\+D\+A\+Devices@{Set\+C\+U\+D\+A\+Devices}!Queued\+C\+U\+D\+A\+Tracker.\+cu@{Queued\+C\+U\+D\+A\+Tracker.\+cu}}
\subsubsection[{\texorpdfstring{Set\+C\+U\+D\+A\+Devices(int $\ast$dev, int numdev)}{SetCUDADevices(int *dev, int numdev)}}]{\setlength{\rightskip}{0pt plus 5cm}void Set\+C\+U\+D\+A\+Devices (
\begin{DoxyParamCaption}
\item[{int $\ast$}]{dev, }
\item[{int}]{numdev}
\end{DoxyParamCaption}
)}\hypertarget{_queued_c_u_d_a_tracker_8cu_abda9d81bb47d6fd2b504bd3df9b2edae}{}\label{_queued_c_u_d_a_tracker_8cu_abda9d81bb47d6fd2b504bd3df9b2edae}

\begin{DoxyCode}
84                                           \{
85     \hyperlink{_queued_c_u_d_a_tracker_8cu_ab36f2f7f7b4b97a02a4597f7baef4f7a}{cudaDeviceList}.assign(dev,dev+numdev);
86 \}
\end{DoxyCode}


\subsection{Variable Documentation}
\index{Queued\+C\+U\+D\+A\+Tracker.\+cu@{Queued\+C\+U\+D\+A\+Tracker.\+cu}!cuda\+Device\+List@{cuda\+Device\+List}}
\index{cuda\+Device\+List@{cuda\+Device\+List}!Queued\+C\+U\+D\+A\+Tracker.\+cu@{Queued\+C\+U\+D\+A\+Tracker.\+cu}}
\subsubsection[{\texorpdfstring{cuda\+Device\+List}{cudaDeviceList}}]{\setlength{\rightskip}{0pt plus 5cm}std\+::vector$<$int$>$ cuda\+Device\+List\hspace{0.3cm}{\ttfamily [static]}}\hypertarget{_queued_c_u_d_a_tracker_8cu_ab36f2f7f7b4b97a02a4597f7baef4f7a}{}\label{_queued_c_u_d_a_tracker_8cu_ab36f2f7f7b4b97a02a4597f7baef4f7a}
